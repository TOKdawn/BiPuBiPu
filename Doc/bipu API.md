# bipu API

## Role
 角色权限
 
| 角色        | 权限    |  查看曲谱  | 收藏曲谱 | 上传曲谱  | 创建谱册 | 收藏谱册 | 审核曲谱 | 
| --------   | ------: | :------: | :----:  |  :----:   |:----: | :----:  | :----: |         
| 游客        | 0       |   √      |         |          |        |         |        |
| 未验证用户   | 0       |   √      |         |          |        |         |        |
| 注册用户     | 10      |   √      |   √     |          |   √    |    √    |        |
| 创作者      | 20      |   √      |   √     |     √     |   √    |    √    |        |
| 管理员      | 30      |   √      |   √     |     √     |   √    |    √    |    √   |

## system Module

### getCatcha
获取验证码,默认type为1
### HTTP Request
`GET /system/getCatcha/:type`
#### 返回实例
```
{
    "status": 0,
    "message": "success",
    "data": "<svg xmlns='http://www.w3.org/2000/svg' width='100' height='40' viewBox='0,0,100,40'><path d='M1 3 C63 34,68 34,81 25' stroke='#e480b2' fill='none'/><path fill='#ef8e8e' d='M47.69 32.92L47.70 32.92L47.68 32.91Q47.03 32.83 46.42 32.86L46.56 33.01L46.45 32.90Q45.88 33.04 45.26 33.04L45.26 33.03L45.19 32.96Q45.52 29.83 45.52 26.77L45.71 26.95L45.71 26.96Q44.01 26.92 43.19 26.92L43.17 26.90L43.13 26.86Q42.47 26.95 40.84 26.88L40.75 26.79L40.72 26.76Q40.78 26.55 40.61 24.34L40.55 24.28L40.61 24.34Q42.82 24.74 45.47 24.74L45.49 24.77L45.65 24.92Q45.36 20.93 44.98 18.62L45.05 18.68L45.01 18.64Q45.68 18.71 46.40 18.71L46.32 18.63L47.88 18.73L47.91 18.75Q47.63 22.49 47.63 24.80L47.70 24.87L47.74 24.91Q49.54 24.77 52.39 24.46L52.42 24.50L52.35 24.42Q52.37 25.73 52.37 26.82L52.30 26.75L52.44 26.89Q52.08 26.77 51.37 26.80L51.37 26.80L51.46 26.90Q50.53 26.85 49.99 26.89L49.97 26.86L50.03 26.92Q50.02 26.92 47.64 26.92L47.66 26.94L47.53 29.87L47.56 29.90Q47.51 31.31 47.61 32.84ZM52.78 24.04L52.87 24.13L52.83 24.08Q51.17 24.40 49.50 24.46L49.51 24.47L49.42 24.38Q49.69 21.63 50.07 19.96L50.05 19.94L50.02 19.91Q49.49 20.06 48.23 20.20L48.25 20.22L48.36 18.32L48.41 18.37Q46.03 18.34 44.53 18.23L44.46 18.16L44.46 18.17Q45.12 21.10 45.29 24.57L45.12 24.40L45.22 24.50Q43.55 24.35 40.25 23.81L40.18 23.74L40.28 23.84Q40.50 24.88 40.50 27.22L40.43 27.15L41.80 27.16L41.84 27.20Q41.88 27.88 41.74 29.14L41.77 29.17L45.24 28.87L45.29 28.92Q45.04 31.69 44.76 33.32L44.88 33.43L44.86 33.41Q45.48 33.36 46.74 33.25L46.81 33.32L46.67 33.19Q46.67 33.80 46.64 34.99L46.80 35.15L46.61 34.96Q47.18 35.06 50.41 35.19L50.42 35.20L50.49 35.28Q49.65 32.49 49.44 28.96L49.36 28.87L49.36 28.88Q52.27 28.89 54.14 29.23L54.31 29.41L54.26 29.35Q54.03 28.44 54.03 27.59L53.99 27.56L53.96 25.83L54.13 26.00Q53.85 25.92 53.38 25.96L53.28 25.86L52.57 25.87L52.62 25.91Q52.70 25.28 52.80 24.06Z'/><path d='M9 34 C50 19,53 17,80 25' stroke='#d58e48' fill='none'/><path fill='#7ee698' d='M18.31 27.01L18.32 27.02L18.43 27.14Q21.07 26.68 23.93 26.79L23.94 26.80L23.91 26.77Q24.06 24.67 24.06 22.53L23.90 22.37L23.98 22.46Q23.91 20.17 24.08 17.90L24.13 17.94L24.17 17.99Q23.10 19.54 18.45 27.15ZM27.22 33.64L27.23 33.66L27.27 33.70Q25.70 33.36 24.11 33.29L24.11 33.29L24.07 33.25Q24.00 31.25 23.90 29.04L23.89 29.02L23.84 28.98Q19.15 28.88 14.94 30.14L14.90 30.10L14.85 30.05Q15.04 29.69 15.21 28.81L15.16 28.76L15.12 28.72Q16.80 25.98 19.99 20.37L19.92 20.30L20.03 20.41Q22.53 15.97 25.59 12.51L25.57 12.48L25.55 12.46Q26.33 12.30 27.83 12.06L27.95 12.18L27.84 12.07Q26.27 17.95 26.27 24.24L26.14 24.10L26.12 24.08Q26.20 25.49 26.27 26.82L26.29 26.83L27.40 26.90L27.41 26.90Q28.03 27.01 28.57 27.12L28.58 27.12L28.46 27.01Q28.51 27.84 28.75 29.57L28.79 29.61L28.84 29.66Q27.84 29.51 26.52 29.34L26.39 29.21L26.52 29.35Q26.66 31.08 27.27 33.70ZM28.70 26.66L28.78 26.74L28.80 26.77Q28.50 26.57 28.33 26.57L28.41 26.65L28.04 26.62L28.10 26.67Q27.85 25.21 27.85 23.95L28.04 24.14L27.89 23.98Q28.03 18.41 29.86 13.04L29.84 13.02L29.79 12.97Q29.10 13.20 27.81 13.54L27.74 13.47L27.86 13.59Q27.95 12.80 28.36 11.54L28.52 11.70L28.46 11.64Q27.33 12.01 25.50 12.21L25.42 12.13L25.40 12.11Q22.02 16.11 17.36 24.47L17.28 24.39L19.12 21.09L19.06 21.03Q18.77 22.04 18.54 22.55L18.50 22.52L14.55 30.60L14.46 30.51Q15.19 30.53 16.21 30.19L16.12 30.09L16.08 30.39L16.04 30.35Q15.91 30.93 15.63 32.05L15.55 31.97L15.55 31.97Q19.25 30.81 23.56 30.98L23.59 31.00L23.72 31.13Q23.62 31.85 23.79 33.61L23.86 33.69L23.93 33.76Q24.81 33.68 25.76 33.79L25.82 33.85L25.68 33.71Q25.89 34.39 26.12 35.61L26.13 35.61L26.09 35.58Q27.82 35.81 30.50 36.62L30.47 36.60L30.59 36.72Q29.62 34.72 28.81 31.80L28.74 31.74L30.08 32.19L30.13 32.24Q30.80 32.51 31.41 32.81L31.39 32.79L31.39 32.79Q30.54 30.41 30.40 28.91L30.56 29.06L30.49 29.00Q29.94 28.82 28.92 28.61L28.90 28.59L28.96 28.66Q28.74 27.49 28.74 26.70ZM21.67 26.63L21.54 26.50L21.53 26.50Q22.32 25.45 23.72 23.18L23.70 23.16L23.57 23.03Q23.67 23.98 23.63 24.83L23.69 24.88L23.66 24.85Q23.69 25.77 23.72 26.62L23.61 26.50L23.62 26.51Q23.08 26.45 22.57 26.45L22.58 26.46L22.65 26.52Q22.10 26.52 21.56 26.52Z'/><path fill='#75eaea' d='M67.93 33.67L68.02 33.76L68.04 33.77Q66.63 33.69 65.23 33.32L65.25 33.33L65.28 33.36Q64.26 32.61 64.12 31.15L64.07 31.10L64.11 31.14Q64.02 30.91 64.19 28.57L64.29 28.67L64.22 28.60Q65.08 28.37 66.88 28.03L66.87 28.02L66.87 28.87L66.78 28.78Q66.44 30.24 67.70 30.75L67.78 30.83L67.85 30.91Q68.48 31.12 70.35 31.12L70.41 31.19L70.31 31.09Q71.70 30.92 71.87 30.85L71.98 30.95L71.93 30.91Q72.83 30.86 73.48 30.42L73.43 30.36L73.49 30.43Q74.68 29.51 74.51 27.64L74.59 27.72L74.46 27.59Q74.39 25.51 72.84 24.12L72.80 24.07L72.88 24.15Q71.26 22.69 69.05 22.69L69.12 22.76L68.98 22.41L69.01 22.45Q69.42 22.48 70.20 22.41L70.10 22.31L70.18 22.39Q71.79 22.20 73.01 21.09L73.18 21.26L73.08 21.16Q74.38 20.13 74.52 18.47L74.39 18.34L74.55 18.50Q74.51 18.08 74.51 17.78L74.56 17.83L74.60 17.87Q74.55 16.46 73.33 15.64L73.31 15.63L73.22 15.54Q72.26 14.95 70.83 15.05L70.82 15.04L70.75 14.97Q69.64 14.88 68.55 15.25L68.49 15.19L68.60 15.30Q67.30 15.78 67.03 16.80L66.97 16.73L66.92 16.68Q66.85 17.46 66.92 18.14L66.86 18.09L66.94 18.17Q65.98 17.92 64.14 17.27L64.17 17.29L64.19 17.32Q63.97 15.81 64.00 15.06L63.91 14.96L64.04 15.10Q64.06 13.65 65.01 13.04L64.91 12.94L65.06 13.09Q66.20 12.42 67.62 12.42L67.67 12.47L67.72 12.53Q70.54 12.49 73.36 12.72L73.29 12.65L73.38 12.74Q77.84 13.05 77.57 16.42L77.59 16.45L77.60 16.45Q77.45 17.69 77.00 19.08L77.14 19.22L77.09 19.18Q76.26 21.91 74.16 22.73L74.10 22.68L74.23 22.80Q76.54 23.24 77.08 26.24L77.02 26.17L77.00 26.16Q77.19 27.16 77.26 28.96L77.32 29.02L77.31 29.01Q77.44 32.98 73.33 33.39L73.41 33.47L73.26 33.33Q72.67 33.45 67.95 33.69ZM72.60 35.69L72.63 35.72L72.68 35.77Q73.20 35.78 75.75 35.84L75.67 35.76L75.63 35.73Q77.36 35.96 78.82 35.38L78.67 35.23L78.83 35.39Q79.70 34.36 79.53 32.80L79.67 32.93L79.58 32.84Q79.45 31.62 79.17 30.06L79.30 30.18L79.17 30.06Q78.50 26.02 76.77 24.56L76.82 24.61L76.73 24.35L76.56 24.15L76.65 24.24Q78.27 23.00 78.95 19.09L78.94 19.09L78.89 19.04Q78.92 18.62 79.02 17.77L78.96 17.71L78.94 17.69Q79.18 17.19 79.12 16.58L79.11 16.57L79.12 16.58Q78.93 15.03 77.78 14.42L77.72 14.36L77.68 14.40L77.68 14.39Q77.44 13.54 76.43 13.07L76.37 13.02L76.42 13.06Q74.98 12.37 70.39 12.10L70.41 12.12L70.35 12.06Q68.85 11.99 67.42 11.99L67.48 12.05L67.60 12.16Q66.13 12.12 64.77 12.70L64.78 12.71L64.83 12.76Q63.56 13.25 63.56 14.82L63.59 14.85L63.64 14.90Q63.67 14.56 63.91 17.55L63.83 17.47L63.84 17.47Q64.11 17.54 65.57 18.08L65.53 18.04L65.61 18.13Q65.66 18.65 65.63 19.09L65.58 19.05L65.49 18.96Q65.60 19.51 65.63 19.98L65.59 19.94L65.70 20.05Q67.12 20.22 68.92 20.32L69.04 20.43L68.92 20.32Q69.04 18.70 70.03 17.96L70.03 17.96L69.90 17.83Q70.70 17.30 72.50 17.10L72.50 17.10L72.45 17.05Q73.44 17.02 73.95 17.19L74.01 17.25L73.91 17.15Q74.12 17.43 74.16 17.53L74.12 17.50L74.02 17.56L74.12 18.07L74.19 18.14Q74.25 18.37 74.21 18.50L74.22 18.51L74.11 18.40Q74.14 20.02 72.78 21.08L72.62 20.92L72.77 21.07Q71.86 21.79 70.06 21.96L70.11 22.01L70.07 21.97Q69.54 22.23 68.76 22.23L68.70 22.17L68.57 22.04Q68.75 22.49 68.89 23.10L68.89 23.11L68.91 23.12Q70.38 23.03 71.67 23.68L71.66 23.67L71.55 23.66L70.17 23.84L70.30 23.97Q70.33 24.28 70.43 24.82L70.36 24.75L70.35 24.74Q72.21 24.62 73.74 25.81L73.82 25.89L73.77 25.84Q74.03 26.24 74.30 27.70L74.26 27.66L74.33 27.73Q74.40 30.25 71.79 30.62L71.71 30.55L71.89 30.73Q69.93 30.88 69.42 30.85L69.40 30.82L69.39 30.81Q69.04 30.77 68.57 30.70L68.49 30.63L68.52 30.25L68.66 29.88L68.62 29.46L68.73 29.27L68.67 29.21Q67.95 29.41 67.24 29.58L67.10 29.44L67.22 29.56Q67.12 29.29 67.12 29.12L67.18 29.18L67.06 29.06Q67.19 28.98 67.19 28.78L67.06 28.65L67.21 28.80Q67.19 28.37 67.32 27.72L67.25 27.66L67.37 27.77Q65.73 28.00 64.06 28.31L64.06 28.31L63.94 28.19Q64.04 28.73 63.94 29.73L63.79 29.58L63.97 29.76Q63.69 30.59 63.69 31.13L63.74 31.18L63.83 31.27Q63.94 33.14 65.16 33.82L64.98 33.65L64.97 33.64Q66.47 35.84 70.68 35.67L70.66 35.65L70.60 35.59Q71.26 35.57 72.62 35.70Z'/></svg>"
}
```
## User Module

### Register

注册接口,成功返回用户信息

#### HTTP Request

`POST /user/register`

#### 请求实例

```
{
  "username": "foo",
  "email": "1874662665@163.com",
  "password": "bar",
  "password2": "bar",
  "captcha": "1234"
}
```
#### 返回实例

 ```
 {
 	"sucess": "true",
 	"message": "",
	"data":{
	  "id": "59ecc6efe549a24e4947b42f",
	  "bid": 0,
	  "username": "foo",
	  "nickname": "foo",
	  "avatar": "",
	  "email": "123456@qq.com",
	  "role": 0
	}
}
 ```
 
 
### Check email
检测用户名重复
#### HTTP Request

`post /user/checkEmail`

#### 请求实例

```
{
	"email":"12323123@163.com"
}
```
#### 返回实例

 ```
200
{
  "sucess": "true",
  "message": "邮箱名未被使用",
  "data": {}
}

400

{
  "sucess": "false",
  "message": "此用户名已被使用",
  "data": {}
}
 ```
 
### Login
用户登录
#### HTTP Request

`POST /user/register`

#### 请求实例

```
{
	"email": "其实就是用户名",
	"password": "用户密码",
	"captcha": "验证码"
}
```
#### 返回实例

```
{
    "message": "成功登录",
    "data": {
        "id": 1,
        "email": "187.@123.com",
        "avatar": "http://bipu.oss-cn-beijing.aliyuncs.com/egg-multipart-test/akari.jpg",
        "name": "text",
        "password": "202cb962ac59075b964b07152d234b70",
        "signature": "这个人很懒,啥也没写╮(╯_╰)╭",
        "role": 1,
        "created_at": "2018-12-29T06:19:26.336Z",
        "updated_at": "2018-12-29T06:19:26.336Z"
    }
}
```


